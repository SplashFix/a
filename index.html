<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="SplashFix â€“ Designer & Coder. I bring design concepts to life and create and edit videos with a touch of code.">
    <title>SplashFix | Designer & Coder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        :root{
            --bg:#F6E9D9;
            --fg:#292524;
            --muted:#6b6b6b;
            --pill:#292524;
            --pill-text:#fff;
            --chip:#ead8c4;
            --accent:#ffbfd1;
            --radius:28px;
            --shadow:0 10px 30px rgba(0,0,0,.08);
        }

        body {
            background: var(--bg);
            color: var(--fg);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .hero {
            min-height: 100svh; /* use small viewport height for mobile UI stability */
            display: flex;
            align-items: center;
            padding: 120px 0;
            position: relative;
        }

        .hero-wrapper {
            display:grid;
            grid-template-columns:1.1fr .9fr;
            gap:48px;
            align-items:center;
            position:relative;
            justify-content:normal;
        }

        .hero-content {
            flex: 1;
            text-align: left;
        }

        .hero-image {
            flex:1;
            display:flex;
            justify-content:center;
            position:relative;
            z-index:0;
        }

        .hero-image img{
            width:min(500px, 80vw);
            height:auto;
            border-radius: var(--radius);
            border: 0;
            box-shadow: var(--shadow);
            transform:none;
            margin:0;
            position:relative;
            background: transparent;
        }

        .hero-greeting {
            display:none;
        }

        .hero-title{
            display:block;
            font-weight:800;
            font-size:clamp(2.4rem,6vw,4.5rem);
            letter-spacing:-.02em;
            line-height:1.05;
            color:var(--fg);
            margin:0 0 12px;
            opacity:0;
            transform: translateY(8px);
            animation: title-in .8s ease-out .15s forwards;
        }
        .hero-title .mark{ position:relative; }
        .hero-title .mark::after{
          content:"";
          position:absolute;
          z-index:-1;
          left:0;
          right:0;
          bottom:.12em;
          height:.35em;
          background: #a4c4ed;
          border-radius:.2em;
          width:0;
          animation: mark-in .9s ease-out .6s forwards;
        }

        .hero-subtitle{
            color: var(--muted);
            font-size: clamp(1rem, 1.4vw, 1.15rem);
            line-height: 1.7;
            max-width: 60ch;
            margin: 8px 0 24px;
        }

        .social-links{display:flex; gap:14px; margin-top:32px; flex-wrap:wrap}

        .social-link{
            width:40px;
            height:40px;
            border-radius:12px;
            background: rgba(30,30,30,0.2);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px); /* Safari support */
            display:flex;
            align-items:center;
            justify-content:center;
            transition:transform .2s ease, background .2s ease;
            border: 1px solid rgba(0,0,0,0.1);
            box-shadow: var(--shadow);
        }
        .social-link{ color:var(--fg); }

        .social-link:hover{
            transform: translateY(-2px);
            background: rgba(30,30,30,0.25);
        }
        .social-link:focus-visible{ outline: 2px solid #a4c4ed; outline-offset: 2px; }

        /* Use the icon image as an alpha mask; paint it with the foreground color */
        .social-link .icon{
          width:20px;
          height:20px;
          display:inline-block;
          background:var(--fg);              /* icon color */
          -webkit-mask: var(--icon) no-repeat center / contain;
                  mask: var(--icon) no-repeat center / contain;
          transition: transform .15s ease, opacity .2s ease;
        }
        .social-link:hover .icon{
          transform: scale(1.08);
          opacity:1;
        }

        /* Inline SVG icons (for crisp brand shapes like YouTube/Twitch) */
        .social-link svg{
          width:20px;
          height:20px;
          display:block;
          fill:currentColor; /* use currentColor so we can control via CSS */
          transition: transform .15s ease;
        }
        .social-link:hover svg{ transform: scale(1.08); }

        @keyframes title-in{ to{ opacity:1; transform:none; } }
        @keyframes mark-in{ to{ width:100%; } }

        @media (max-width: 1024px) {
            .hero-wrapper{
                grid-template-columns:1fr;
                text-align:center;
                gap:3rem;
            }
            .hero-content{ text-align:center; margin:0 auto; }
            .social-links{ justify-content:center; }
            .hero-image img {
                max-width: 100%;
                transform: none;
            }
        }

        @media (max-width: 768px) {
            .hero-title{ font-size: clamp(2.2rem, 7vw, 3.2rem); }
            .hero-image img {
                max-width: 100%;
                transform: none;
            }
            .social-link {
                width: 40px;
                height: 40px;
            }
        }

        @media (max-width: 480px) {
            .hero-title { font-size: 3rem; }
            .hero-greeting { font-size: 1.8rem; }
            .social-links { gap: 1rem; }
        }
        @media (prefers-reduced-motion: reduce){
          .hero-title{ animation:none; transform:none; opacity:1; }
          .hero-title .mark::after{ animation:none; width:100%; }
        }

        /* Confetti canvases */
        .confetti-canvas{
          position:fixed;
          top:0;
          width:50vw;
          height:100vh;
          pointer-events:none;
          z-index:999;
        }
        #confetti-tl{ left:0; }
        #confetti-tr{ right:0; }
        @media (max-width: 768px){
          .confetti-canvas{ width:50vw; height:100vh; }
        }
        
        /* Spotify Widget */
        .spotify-widget { 
            margin-top: 32px; 
        }
        #spotify-login-button { 
            background-color: #1DB954; 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 500px; 
            font-weight: bold; 
            cursor: pointer; 
            transition: background-color .2s ease, transform .2s ease; 
            font-size: 1rem; 
        }
        #spotify-login-button:hover { 
            background-color: #1ed760; 
            transform: scale(1.05); 
        }
        #spotify-player-container { 
            display: flex; 
            align-items: center; 
            gap: 16px; 
            background: var(--chip); 
            padding: 12px; 
            border-radius: 16px; 
            max-width: 400px; 
            margin: 0 auto; 
            text-align: left; 
            box-shadow: 0 4px 15px rgba(0,0,0,.05); 
        }
        #spotify-player-container.is-inactive { 
            display: none; 
        }
        #spotify-player-container img { 
            width: 64px; 
            height: 64px; 
            border-radius: 8px; 
            object-fit: cover; 
        }
        #spotify-player-container .track-info { 
            overflow: hidden; 
        }
        #spotify-player-container .track-info p { 
            margin: 0; 
            white-space: nowrap; 
            overflow: hidden; 
            text-overflow: ellipsis; 
        }
        #spotify-player-container .track-name { 
            font-weight: bold; 
            color: var(--fg); 
        }
        #spotify-player-container .artist-name { 
            color: var(--muted); 
            font-size: 0.9rem; 
        }
        .track-link { 
            text-decoration: none; 
            color: inherit; 
            display: block; 
        }
        .track-link:hover .track-name { 
            text-decoration: underline; 
        }
    </style>
</head>
<body>
    <section class="hero">
        <div class="container">
            <div class="hero-wrapper">
                <div class="hero-content">
                    <h1 class="hero-title">Hi, I'm <span class="mark">SplashFix</span></h1>
                    <p class="hero-subtitle">
                        I love connecting with new people, exploring fresh ideas, and bringing design concepts to life, while also enjoying creating and editing videos with a touch of code.
                    </p>
                    <div class="social-links">
                        <a href="https://www.youtube.com/@SPLASHFIXX" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="YouTube profile">
                            <svg viewBox="0 0 24 24" role="img" aria-hidden="true">
                              <path d="M23.5 6.2a4 4 0 0 0-2.8-2.8C18.7 3 12 3 12 3s-6.7 0-8.7.4A4 4 0 0 0 .5 6.2a41 41 0 0 0 0 12a41 41 0 0 0 .5 5.8 4 4 0 0 0 2.8 2.8C5.3 21 12 21 12 21s6.7 0 8.7-.4a4 4 0 0 0 2.8-2.8A41 41 0 0 0 24 12a41 41 0 0 0-.5-5.8zM9.75 15.02V8.98L15.5 12l-5.75 3.02z"/>
                            </svg>
                        </a>
                        <a href="https://www.tiktok.com/@gabdrops" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="TikTok profile">
                            <span class="icon" style="--icon:url('https://cdn-icons-png.flaticon.com/512/3046/3046126.png')" aria-hidden="true"></span>
                        </a>
                        <a href="https://open.spotify.com/user/31clvas2t3veesyjmacjzmmwzy5u" target="_blank" rel="noopener noreferrer" class="social-link spotify" aria-label="Spotify profile">
                          <svg viewBox="0 0 24 24" role="img" aria-hidden="true" preserveAspectRatio="xMidYMid meet">
                            <path d="M12 0C5.372 0 0 5.372 0 12s5.372 12 12 12 12-5.372 12-12S18.628 0 12 0zm5.095 17.46a.75.75 0 0 1-1.06.247c-2.64-1.61-5.96-1.98-9.87-1.1a.75.75 0 1 1-.33-1.463c4.28-1.01 7.94-.58 10.86 1.18.33.2.44.63.3.99zm1.34-3.31a.875.875 0 0 1-1.206.287c-3-1.85-7.57-2.39-11.11-1.31a.875.875 0 1 1-.513-1.676c3.94-1.2 8.86-.61 12.23 1.46.4.24.53.77.29 1.19zm.12-3.44a1 1 0 0 1-1.377.328c-3.41-2.07-8.6-2.26-12.02-1.25a1 1 0 1 1-.518-1.932c3.83-1.1 9.64-.86 13.52 1.46.49.3.64.95.37 1.41z"/>
                          </svg>
                        </a>
                        <a href="https://www.twitch.tv/splashfix_" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Twitch channel">
                          <svg viewBox="0 0 24 24" role="img" aria-hidden="true">
                            <path fill="currentColor" d="M2.449 0L0 2.449v16.157h5.51V24l4.318-4.318h3.633l8.601-8.601V0H2.449zm18.156 12.399l-3.633 3.633h-4.318l-3.004 3.004v-3.004H4.32V1.875h16.285v10.524zM14.9 5.51v5.51h-1.875V5.51h1.875zm-4.95 0v5.51H8.075V5.51h1.875z"/>
                          </svg>
                        </a>
                        <a href="https://discord.gg/At6jxmyUyS" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Discord community">
                            <span class="icon" style="--icon:url('https://cdn-icons-png.flaticon.com/512/5968/5968756.png')" aria-hidden="true"></span>
                        </a>
                    </div>
                    <div class="spotify-widget">
                        <div id="spotify-player-container" style="display: none;"></div>
                        <div id="spotify-login-container" style="display: block;">
                            <button id="spotify-login-button">Listen-Along auf Spotify</button>
                        </div>
                    </div>
                </div>
                <div class="hero-image">
                    <img src="https://i.imgur.com/CUsesa5.png" alt="Freelance designer portrait" width="500" height="500">
                </div>
            </div>
        </div>
    </section>
  <canvas id="confetti-tl" class="confetti-canvas" aria-hidden="true"></canvas>
  <canvas id="confetti-tr" class="confetti-canvas" aria-hidden="true"></canvas>
  <script>
  (function(){
  const img = document.querySelector('.hero-image img');
  const canvases = {
    tl: document.getElementById('confetti-tl'),
    tr: document.getElementById('confetti-tr'),
  };
  const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  const COLORS = ['#ff6b6b', '#ffd93d', '#6bcbef', '#a4c4ed', '#9b5de5', '#00d09c', '#ffffff'];
  // let clickCount = 0;
  // let clickTimer = null;
  // let timers = [];
  let suppressNextClick = false;
  // const RUN_TIME_MS = 3600 + 4*90; // duration + total stagger gap
  let running = false;
  let reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  
  function sizeCanvas(c){
    const rect = c.getBoundingClientRect();
    c.width = Math.floor(rect.width * DPR);
    c.height = Math.floor(rect.height * DPR);
    const ctx = c.getContext('2d');
    ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
    return {ctx, rect};
  }
  
  function baseAngleFor(corner){
    return corner === 'tl' ? 20 : 160; // throw diagonally inward from top corners
  }
  
  function originFor(corner){
    // exact top corners
    return corner === 'tl' ? {x: 0, y: 0} : {x: window.innerWidth, y: 0};
  }
  
  function makeParticles(corner, count){
    const particles = [];
    const origin = originFor(corner);
    const spread = 90; // degrees
    const base = baseAngleFor(corner);
    for(let i=0;i<count;i++){
      const size = 2 + Math.random()*8;
      const ang = (base + (Math.random()-0.5)*spread) * Math.PI/180;
      const speed = 6 + Math.random()*10; // faster to sweep screen
      const vx = Math.cos(ang) * speed;
      const vy = Math.sin(ang) * speed;
      const rot = Math.random()*Math.PI*2;
      const vr = (Math.random()*0.25 - 0.125);
      const color = COLORS[(Math.random()*COLORS.length)|0];
      const r = Math.random();
      const shape = r < 0.55 ? 'rect' : (r < 0.85 ? 'tri' : 'circle');
      particles.push({x: origin.x, y: origin.y, vx, vy, rot, vr, size, color, shape, alpha: 1});
    }
    return particles;
  }
  
  function drawParticles(ctx, particles, area){
    ctx.clearRect(0,0,area.w,area.h);
    for(const p of particles){
      ctx.save();
      ctx.globalAlpha = p.alpha;
      ctx.translate(p.x - area.x, p.y - area.y);
      ctx.rotate(p.rot);
      ctx.fillStyle = p.color;
      if(p.shape==='rect'){
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
      }else if(p.shape==='tri'){
        ctx.beginPath();
        ctx.moveTo(0, -p.size/2);
        ctx.lineTo(p.size/2, p.size/2);
        ctx.lineTo(-p.size/2, p.size/2);
        ctx.closePath();
        ctx.fill();
      }else{
        ctx.beginPath();
        ctx.arc(0,0,p.size*0.35,0,Math.PI*2);
        ctx.fill();
      }
      ctx.restore();
    }
  }
  
  function animateBurst(corner, duration=3200, count=240){
    const {ctx, rect} = sizeCanvas(canvases[corner]);
    const area = {x:rect.left, y:rect.top, w:rect.width, h:rect.height};
    const particles = makeParticles(corner, count);
    let start = null;
    function step(ts){
      if(!start) start = ts;
      const t = ts - start;
      for(const p of particles){
        // wind pushes inward across screen
        const windX = corner === 'tl' ? 0.06 : -0.06;
        p.vx += windX;
        p.vy += 0.09; // gravity downwards
        // slight drag
        p.vx *= 0.996; p.vy *= 0.996;
        p.x += p.vx; p.y += p.vy;
        p.rot += p.vr;
        if(t > duration*0.7){ p.alpha = Math.max(0, 1 - (t - duration*0.7)/(duration*0.3)); }
      }
      drawParticles(ctx, particles, area);
      if(t < duration){ requestAnimationFrame(step); }
      else{ ctx.clearRect(0,0,canvases[corner].width, canvases[corner].height); }
    }
    requestAnimationFrame(step);
  }
  
  function triggerConfetti(){
    if(reduce) return;
    if(running) return;
    running = true;
    // one long dense wave from both top corners
    animateBurst('tl', 3600, 560);
    animateBurst('tr', 3600, 560);
    setTimeout(()=>{ running = false; }, 3800);
  }
  
  let clickCount = 0;
  let windowTimer = null;
  const WINDOW_MS = 1200; // time window to collect 5 clicks
  
  function resetWindow(){
    clickCount = 0;
    if(windowTimer){ clearTimeout(windowTimer); windowTimer = null; }
  }
  
  function registerTap(){
    if(running) return;
    if(!windowTimer){
      windowTimer = setTimeout(resetWindow, WINDOW_MS);
    }
    clickCount++;
    if(clickCount >= 5){
      resetWindow();
      triggerConfetti();
    }
  }
  
  function onResize(){
    Object.values(canvases).forEach(c=>{
      const ctx = c.getContext('2d');
      if(ctx) ctx.clearRect(0,0,c.width,c.height);
      const rect = c.getBoundingClientRect();
      c.width = Math.floor(rect.width * DPR);
      c.height = Math.floor(rect.height * DPR);
      const ctx2 = c.getContext('2d');
      ctx2.setTransform(DPR, 0, 0, DPR, 0, 0);
    });
  }
  window.addEventListener('resize', onResize, {passive:true});
  onResize();
  
  if(img){
    img.addEventListener('click', (e)=>{
      if(suppressNextClick){ suppressNextClick = false; return; }
      registerTap();
    });
    img.setAttribute('tabindex','0');
    img.setAttribute('role','button');
    img.setAttribute('aria-label','Trigger confetti with five clicks');
    img.addEventListener('keydown', (e)=>{
      if(e.key==='Enter' || e.key===' '){
        e.preventDefault();
        suppressNextClick = true; // guard against synthetic click on keyup
        registerTap();
        setTimeout(()=>{ suppressNextClick = false; }, 300);
      }
    });
    // Use aria-describedby instead of aria-description (not widely supported)
    const descId = 'confetti-instruction';
    let descEl = document.getElementById(descId);
    if(!descEl){
      descEl = document.createElement('span');
      descEl.id = descId;
      descEl.textContent = 'Five clicks on the image: confetti burts from the top corners';
      descEl.style.position = 'absolute';
      descEl.style.width = '1px';
      descEl.style.height = '1px';
      descEl.style.margin = '-1px';
      descEl.style.padding = '0';
      descEl.style.border = '0';
      descEl.style.overflow = 'hidden';
      descEl.style.clip = 'rect(0 0 0 0)';
      descEl.style.clipPath = 'inset(50%)';
      descEl.style.whiteSpace = 'nowrap';
      document.body.appendChild(descEl);
    }
    img.setAttribute('aria-describedby', descId);
  }
  })();
  </script>
  <script>
    (function() {
        const clientId = "77b3ed26bdee42a98a70f3180da9158d";
        const redirectUri = window.location.origin + window.location.pathname;
        const scope = 'user-read-currently-playing user-read-recently-played';

        const loginButton = document.getElementById('spotify-login-button');
        const loginContainer = document.getElementById('spotify-login-container');
        const playerContainer = document.getElementById('spotify-player-container');

        window.addEventListener('load', () => {
            const args = new URLSearchParams(window.location.search);
            const code = args.get('code');

            if (code) {
                // We have a code, let's exchange it for a token
                getAccessToken(code);
            } else {
                // No code, check if we have a stored token
                const accessToken = localStorage.getItem('spotify_access_token');
                if (accessToken && Date.now() < localStorage.getItem('spotify_token_expires')) {
                    fetchSpotifyData(accessToken);
                } else {
                    // No token or expired, show login button
                    loginContainer.style.display = 'block';
                    playerContainer.style.display = 'none';
                }
            }
        });

        loginButton.addEventListener('click', () => {
            redirectToSpotifyAuthorize();
        });

        async function redirectToSpotifyAuthorize() {
            const verifier = generateCodeVerifier(128);
            const challenge = await generateCodeChallenge(verifier);

            localStorage.setItem("spotify_code_verifier", verifier);

            const params = new URLSearchParams();
            params.append("client_id", clientId);
            params.append("response_type", "code");
            params.append("redirect_uri", redirectUri);
            params.append("scope", scope);
            params.append("code_challenge_method", "S256");
            params.append("code_challenge", challenge);

            document.location = `https://accounts.spotify.com/authorize?${params.toString()}`;
        }

        async function getAccessToken(code) {
            const verifier = localStorage.getItem("spotify_code_verifier");

            const params = new URLSearchParams();
            params.append("client_id", clientId);
            params.append("grant_type", "authorization_code");
            params.append("code", code);
            params.append("redirect_uri", redirectUri);
            params.append("code_verifier", verifier);

            try {
                const result = await fetch("https://accounts.spotify.com/api/token", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: params
                });

                const { access_token, expires_in } = await result.json();

                if (access_token) {
                    localStorage.setItem('spotify_access_token', access_token);
                    localStorage.setItem('spotify_token_expires', Date.now() + expires_in * 1000);
                    // Clean the URL
                    window.history.pushState({}, document.title, window.location.pathname);
                    fetchSpotifyData(access_token);
                }

            } catch (error) {
                console.error("Error fetching access token:", error);
                loginContainer.style.display = 'block';
                playerContainer.style.display = 'none';
            }
        }
        
        async function fetchSpotifyData(token) {
            try {
                const response = await fetch('https://api.spotify.com/v1/me/player/currently-playing', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });

                if (response.status === 200) {
                    const data = await response.json();
                    if (data.item) {
                        displayTrack(data.item, true);
                        return;
                    }
                }
                
                // If nothing is currently playing or response was not 200, try recently played
                const recentResponse = await fetch('https://api.spotify.com/v1/me/player/recently-played?limit=1', {
                    headers: { 'Authorization': `Bearer ${token}` }
                });

                if (recentResponse.status === 200) {
                    const data = await recentResponse.json();
                    if (data.items && data.items.length > 0) {
                        displayTrack(data.items[0].track, false);
                    } else {
                        displayInactive();
                    }
                } else {
                     displayInactive();
                }

            } catch (error) {
                console.error("Error fetching Spotify data:", error);
                displayInactive();
            }
        }

        function displayTrack(track, isPlaying) {
            const albumCover = track.album.images[0]?.url || 'https://i.imgur.com/3gcePsw.png';
            const trackName = track.name;
            const artistName = track.artists.map(artist => artist.name).join(', ');
            const trackUrl = track.external_urls.spotify;

            playerContainer.innerHTML = `
                <a href="${trackUrl}" target="_blank" rel="noopener noreferrer" class="track-link" style="display: contents;">
                    <img src="${albumCover}" alt="Album cover for ${track.album.name}">
                    <div class="track-info">
                        <p class="track-name" title="${trackName}">${trackName}</p>
                        <p class="artist-name" title="${artistName}">${artistName}</p>
                    </div>
                </a>
            `;

            loginContainer.style.display = 'none';
            playerContainer.style.display = 'flex';
        }

        function displayInactive() {
            playerContainer.innerHTML = `<p>Momentan wird nichts abgespielt.</p>`;
            playerContainer.style.display = 'flex';
            loginContainer.style.display = 'none';
        }


        // PKCE Helper Functions
        function generateCodeVerifier(length) {
            let text = '';
            let possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

            for (let i = 0; i < length; i++) {
                text += possible.charAt(Math.floor(Math.random() * possible.length));
            }
            return text;
        }

        async function generateCodeChallenge(codeVerifier) {
            const data = new TextEncoder().encode(codeVerifier);
            const digest = await window.crypto.subtle.digest('SHA-256', data);
            return btoa(String.fromCharCode.apply(null, [...new Uint8Array(digest)]))
                .replace(/\+/g, '-')
                .replace(/\//g, '_')
                .replace(/=+$/, '');
        }
    })();
  </script>
</body>
</html>